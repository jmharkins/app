stkApp.controller('mainControl', ['$scope', '$routeParams', function ($scope , $routeParams){}])

stkApp.controller('playControl', ['$scope', '$location', '$routeParams', 'playerShots', 'playerList', function ($scope, $location, $routeParams, playerShots, playerList){
	this.params = $routeParams;
	var pID = this.params.id;
	$scope.plist = [];
	console.log("controller load")
	$scope.curPlayer = {};
	playerList().success(function(data){
		$scope.plist = data 
		$scope.curPlayer = $scope.plist.filter(function(d) { return d._id.player_id === pID })[0]
	})
	$scope.$watch("curPlayer", function(newValue, oldValue) {
		console.log(newValue, oldValue)
		if(oldValue._id ) {
		var url = '/player/' + newValue._id.player_id
		$location.path(url)
		}
	})
	$scope.chartData = [];
	$scope.lgavgs = [{"x":242.4871130596428,"y":240,"ot_rate":0.38545454545454544},{"x":69.28203230275508,"y":240,"ot_rate":0.46153846153846156},{"x":121.2435565298214,"y":210,"ot_rate":0.4948453608247423},{"x":242.4871130596428,"y":180,"ot_rate":0.31277533039647576},{"x":138.56406460551017,"y":240,"ot_rate":0.4958217270194986},{"x":103.92304845413263,"y":300,"ot_rate":0.4581673306772908},{"x":173.2050807568877,"y":180,"ot_rate":0.32335329341317365},{"x":259.80762113533154,"y":210,"ot_rate":0.29213483146067415},{"x":86.60254037844385,"y":210,"ot_rate":0.4460511679644049},{"x":69.28203230275508,"y":180,"ot_rate":0.41754385964912283},{"x":103.92304845413263,"y":180,"ot_rate":0.455},{"x":242.4871130596428,"y":300,"ot_rate":0.2871287128712871},{"x":259.80762113533154,"y":270,"ot_rate":0.28},{"x":173.2050807568877,"y":120,"ot_rate":0.3838383838383838},{"x":155.88457268119893,"y":210,"ot_rate":0.4612794612794613},{"x":121.2435565298214,"y":150,"ot_rate":0.4964788732394366},{"x":51.96152422706631,"y":210,"ot_rate":0.6220657276995305},{"x":69.28203230275508,"y":300,"ot_rate":0.5106382978723404},{"x":155.88457268119893,"y":150,"ot_rate":0.4444444444444444},{"x":103.92304845413263,"y":240,"ot_rate":0.4379905808477237},{"x":173.2050807568877,"y":300,"ot_rate":0.42063492063492064},{"x":86.60254037844385,"y":270,"ot_rate":0.47720364741641336},{"x":190.5255888325765,"y":270,"ot_rate":0.38},{"x":190.5255888325765,"y":330,"ot_rate":0.3626373626373626},{"x":190.5255888325765,"y":210,"ot_rate":0.46987951807228917},{"x":225.16660498395402,"y":210,"ot_rate":0.37623762376237624},{"x":207.84609690826525,"y":180,"ot_rate":0.4077669902912621},{"x":207.84609690826525,"y":240,"ot_rate":0.4110429447852761},{"x":225.16660498395402,"y":150,"ot_rate":0.3582089552238806},{"x":155.88457268119893,"y":270,"ot_rate":0.40350877192982454},{"x":121.2435565298214,"y":270,"ot_rate":0.5185185185185185},{"x":190.5255888325765,"y":150,"ot_rate":0.39147286821705424},{"x":34.64101615137754,"y":240,"ot_rate":0.6516129032258065},{"x":34.64101615137754,"y":180,"ot_rate":0.4888888888888889},{"x":51.96152422706631,"y":330,"ot_rate":0.5714285714285714},{"x":225.16660498395402,"y":270,"ot_rate":0.34274193548387094},{"x":207.84609690826525,"y":300,"ot_rate":0.39919354838709675},{"x":259.80762113533154,"y":150,"ot_rate":0.38},{"x":207.84609690826525,"y":120,"ot_rate":0.392},{"x":294.44863728670913,"y":270,"ot_rate":0.36363636363636365},{"x":138.56406460551017,"y":300,"ot_rate":0.3917525773195876},{"x":86.60254037844385,"y":150,"ot_rate":0.4908424908424908},{"x":242.4871130596428,"y":120,"ot_rate":0.21212121212121213},{"x":103.92304845413263,"y":120,"ot_rate":0.514018691588785},{"x":34.64101615137754,"y":300,"ot_rate":0.5806451612903226},{"x":277.12812921102034,"y":180,"ot_rate":0.35135135135135137},{"x":86.60254037844385,"y":330,"ot_rate":0.3225806451612903},{"x":138.56406460551017,"y":180,"ot_rate":0.4698275862068966},{"x":17.32050807568877,"y":150,"ot_rate":0},{"x":51.96152422706631,"y":270,"ot_rate":0.5679012345679012},{"x":173.2050807568877,"y":240,"ot_rate":0.42857142857142855},{"x":138.56406460551017,"y":60,"ot_rate":0.5},{"x":155.88457268119893,"y":330,"ot_rate":0.3333333333333333},{"x":69.28203230275508,"y":120,"ot_rate":0.6052631578947368},{"x":51.96152422706631,"y":150,"ot_rate":0.5169491525423728},{"x":190.5255888325765,"y":90,"ot_rate":0.25},{"x":277.12812921102034,"y":240,"ot_rate":0.13953488372093023},{"x":121.2435565298214,"y":330,"ot_rate":0.3333333333333333},{"x":277.12812921102034,"y":120,"ot_rate":0.15384615384615385},{"x":17.32050807568877,"y":270,"ot_rate":0.4},{"x":138.56406460551017,"y":120,"ot_rate":0.3855421686746988},{"x":225.16660498395402,"y":330,"ot_rate":0.3235294117647059},{"x":277.12812921102034,"y":300,"ot_rate":0.18181818181818182},{"x":121.2435565298214,"y":90,"ot_rate":0.5384615384615384},{"x":225.16660498395402,"y":90,"ot_rate":0.3},{"x":207.84609690826525,"y":420,"ot_rate":1},{"x":259.80762113533154,"y":330,"ot_rate":0.15789473684210525},{"x":329.08965343808666,"y":90,"ot_rate":0},{"x":51.96152422706631,"y":90,"ot_rate":0.5},{"x":155.88457268119893,"y":390,"ot_rate":0},{"x":381.051177665153,"y":300,"ot_rate":0.5},{"x":86.60254037844385,"y":90,"ot_rate":0.5},{"x":294.44863728670913,"y":210,"ot_rate":0.21428571428571427},{"x":173.2050807568877,"y":360,"ot_rate":0.3333333333333333},{"x":294.44863728670913,"y":150,"ot_rate":0.75},{"x":34.64101615137754,"y":360,"ot_rate":0},{"x":658.1793068761733,"y":300,"ot_rate":0},{"x":190.5255888325765,"y":30,"ot_rate":0.3333333333333333},{"x":34.64101615137754,"y":120,"ot_rate":0.5},{"x":138.56406460551017,"y":360,"ot_rate":0},{"x":329.08965343808666,"y":270,"ot_rate":0},{"x":207.84609690826525,"y":360,"ot_rate":0.8},{"x":17.32050807568877,"y":210,"ot_rate":0.8333333333333334},{"x":381.051177665153,"y":240,"ot_rate":0},{"x":433.0127018922193,"y":210,"ot_rate":0},{"x":467.6537180435968,"y":210,"ot_rate":0},{"x":103.92304845413263,"y":360,"ot_rate":0.25},{"x":433.0127018922193,"y":390,"ot_rate":1},{"x":294.44863728670913,"y":90,"ot_rate":1},{"x":329.08965343808666,"y":390,"ot_rate":0},{"x":398.3716857408417,"y":270,"ot_rate":0},{"x":398.3716857408417,"y":210,"ot_rate":0.25},{"x":277.12812921102034,"y":60,"ot_rate":0},{"x":415.6921938165305,"y":360,"ot_rate":1},{"x":329.08965343808666,"y":150,"ot_rate":0},{"x":311.76914536239786,"y":240,"ot_rate":0},{"x":311.76914536239786,"y":180,"ot_rate":0},{"x":381.051177665153,"y":60,"ot_rate":0},{"x":762.102355330306,"y":240,"ot_rate":1},{"x":103.92304845413263,"y":60,"ot_rate":0},{"x":415.6921938165305,"y":180,"ot_rate":0},{"x":242.4871130596428,"y":360,"ot_rate":1},{"x":467.6537180435968,"y":330,"ot_rate":0},{"x":259.80762113533154,"y":90,"ot_rate":0},{"x":294.44863728670913,"y":330,"ot_rate":1},{"x":155.88457268119893,"y":90,"ot_rate":0.5},{"x":207.84609690826525,"y":60,"ot_rate":1},{"x":381.051177665153,"y":420,"ot_rate":0},{"x":190.5255888325765,"y":390,"ot_rate":0.5},{"x":433.0127018922193,"y":270,"ot_rate":0},{"x":363.7306695894642,"y":330,"ot_rate":1},{"x":294.44863728670913,"y":390,"ot_rate":0},{"x":398.3716857408417,"y":30,"ot_rate":0},{"x":381.051177665153,"y":360,"ot_rate":0},{"x":363.7306695894642,"y":270,"ot_rate":0},{"x":450.33320996790803,"y":180,"ot_rate":1},{"x":363.7306695894642,"y":210,"ot_rate":0.6666666666666666},{"x":363.7306695894642,"y":390,"ot_rate":1},{"x":173.2050807568877,"y":60,"ot_rate":1},{"x":519.6152422706631,"y":300,"ot_rate":1},{"x":415.6921938165305,"y":300,"ot_rate":0},{"x":311.76914536239786,"y":120,"ot_rate":1},{"x":381.051177665153,"y":120,"ot_rate":0},{"x":363.7306695894642,"y":90,"ot_rate":1},{"x":121.2435565298214,"y":390,"ot_rate":1},{"x":346.4101615137754,"y":300,"ot_rate":1},{"x":346.4101615137754,"y":180,"ot_rate":1},{"x":86.60254037844385,"y":30,"ot_rate":0},{"x":346.4101615137754,"y":60,"ot_rate":0},{"x":398.3716857408417,"y":330,"ot_rate":0},{"x":329.08965343808666,"y":330,"ot_rate":0}]	playerShots(this.params.id).success(function(data) {
		$scope.chartData = data
	})
}])

stkApp.controller('teamControl', ['$scope', '$location', '$routeParams', 'teamShots', 'teamList', function ($scope , $location, $routeParams, teamShots, teamList){
	this.params = $routeParams;
	var tID = this.params.id;
	$scope.tlist = [];
	console.log("controller load")
	$scope.curTeam = {};
	teamList().success(function(data){
		$scope.tlist = data 
		$scope.curTeam = $scope.tlist.filter(function(d) { return d.id == tID })[0]
	})
	$scope.$watch("curTeam", function(newValue, oldValue) {
		console.log(newValue, oldValue)
		if(oldValue.id) {
		var url = '/team/' + newValue.id
		$location.path(url)
		}
	})
	$scope.chartData = [];
	$scope.lgavgs = [{"x":242.4871130596428,"y":240,"ot_rate":0.38545454545454544},{"x":69.28203230275508,"y":240,"ot_rate":0.46153846153846156},{"x":121.2435565298214,"y":210,"ot_rate":0.4948453608247423},{"x":242.4871130596428,"y":180,"ot_rate":0.31277533039647576},{"x":138.56406460551017,"y":240,"ot_rate":0.4958217270194986},{"x":103.92304845413263,"y":300,"ot_rate":0.4581673306772908},{"x":173.2050807568877,"y":180,"ot_rate":0.32335329341317365},{"x":259.80762113533154,"y":210,"ot_rate":0.29213483146067415},{"x":86.60254037844385,"y":210,"ot_rate":0.4460511679644049},{"x":69.28203230275508,"y":180,"ot_rate":0.41754385964912283},{"x":103.92304845413263,"y":180,"ot_rate":0.455},{"x":242.4871130596428,"y":300,"ot_rate":0.2871287128712871},{"x":259.80762113533154,"y":270,"ot_rate":0.28},{"x":173.2050807568877,"y":120,"ot_rate":0.3838383838383838},{"x":155.88457268119893,"y":210,"ot_rate":0.4612794612794613},{"x":121.2435565298214,"y":150,"ot_rate":0.4964788732394366},{"x":51.96152422706631,"y":210,"ot_rate":0.6220657276995305},{"x":69.28203230275508,"y":300,"ot_rate":0.5106382978723404},{"x":155.88457268119893,"y":150,"ot_rate":0.4444444444444444},{"x":103.92304845413263,"y":240,"ot_rate":0.4379905808477237},{"x":173.2050807568877,"y":300,"ot_rate":0.42063492063492064},{"x":86.60254037844385,"y":270,"ot_rate":0.47720364741641336},{"x":190.5255888325765,"y":270,"ot_rate":0.38},{"x":190.5255888325765,"y":330,"ot_rate":0.3626373626373626},{"x":190.5255888325765,"y":210,"ot_rate":0.46987951807228917},{"x":225.16660498395402,"y":210,"ot_rate":0.37623762376237624},{"x":207.84609690826525,"y":180,"ot_rate":0.4077669902912621},{"x":207.84609690826525,"y":240,"ot_rate":0.4110429447852761},{"x":225.16660498395402,"y":150,"ot_rate":0.3582089552238806},{"x":155.88457268119893,"y":270,"ot_rate":0.40350877192982454},{"x":121.2435565298214,"y":270,"ot_rate":0.5185185185185185},{"x":190.5255888325765,"y":150,"ot_rate":0.39147286821705424},{"x":34.64101615137754,"y":240,"ot_rate":0.6516129032258065},{"x":34.64101615137754,"y":180,"ot_rate":0.4888888888888889},{"x":51.96152422706631,"y":330,"ot_rate":0.5714285714285714},{"x":225.16660498395402,"y":270,"ot_rate":0.34274193548387094},{"x":207.84609690826525,"y":300,"ot_rate":0.39919354838709675},{"x":259.80762113533154,"y":150,"ot_rate":0.38},{"x":207.84609690826525,"y":120,"ot_rate":0.392},{"x":294.44863728670913,"y":270,"ot_rate":0.36363636363636365},{"x":138.56406460551017,"y":300,"ot_rate":0.3917525773195876},{"x":86.60254037844385,"y":150,"ot_rate":0.4908424908424908},{"x":242.4871130596428,"y":120,"ot_rate":0.21212121212121213},{"x":103.92304845413263,"y":120,"ot_rate":0.514018691588785},{"x":34.64101615137754,"y":300,"ot_rate":0.5806451612903226},{"x":277.12812921102034,"y":180,"ot_rate":0.35135135135135137},{"x":86.60254037844385,"y":330,"ot_rate":0.3225806451612903},{"x":138.56406460551017,"y":180,"ot_rate":0.4698275862068966},{"x":17.32050807568877,"y":150,"ot_rate":0},{"x":51.96152422706631,"y":270,"ot_rate":0.5679012345679012},{"x":173.2050807568877,"y":240,"ot_rate":0.42857142857142855},{"x":138.56406460551017,"y":60,"ot_rate":0.5},{"x":155.88457268119893,"y":330,"ot_rate":0.3333333333333333},{"x":69.28203230275508,"y":120,"ot_rate":0.6052631578947368},{"x":51.96152422706631,"y":150,"ot_rate":0.5169491525423728},{"x":190.5255888325765,"y":90,"ot_rate":0.25},{"x":277.12812921102034,"y":240,"ot_rate":0.13953488372093023},{"x":121.2435565298214,"y":330,"ot_rate":0.3333333333333333},{"x":277.12812921102034,"y":120,"ot_rate":0.15384615384615385},{"x":17.32050807568877,"y":270,"ot_rate":0.4},{"x":138.56406460551017,"y":120,"ot_rate":0.3855421686746988},{"x":225.16660498395402,"y":330,"ot_rate":0.3235294117647059},{"x":277.12812921102034,"y":300,"ot_rate":0.18181818181818182},{"x":121.2435565298214,"y":90,"ot_rate":0.5384615384615384},{"x":225.16660498395402,"y":90,"ot_rate":0.3},{"x":207.84609690826525,"y":420,"ot_rate":1},{"x":259.80762113533154,"y":330,"ot_rate":0.15789473684210525},{"x":329.08965343808666,"y":90,"ot_rate":0},{"x":51.96152422706631,"y":90,"ot_rate":0.5},{"x":155.88457268119893,"y":390,"ot_rate":0},{"x":381.051177665153,"y":300,"ot_rate":0.5},{"x":86.60254037844385,"y":90,"ot_rate":0.5},{"x":294.44863728670913,"y":210,"ot_rate":0.21428571428571427},{"x":173.2050807568877,"y":360,"ot_rate":0.3333333333333333},{"x":294.44863728670913,"y":150,"ot_rate":0.75},{"x":34.64101615137754,"y":360,"ot_rate":0},{"x":658.1793068761733,"y":300,"ot_rate":0},{"x":190.5255888325765,"y":30,"ot_rate":0.3333333333333333},{"x":34.64101615137754,"y":120,"ot_rate":0.5},{"x":138.56406460551017,"y":360,"ot_rate":0},{"x":329.08965343808666,"y":270,"ot_rate":0},{"x":207.84609690826525,"y":360,"ot_rate":0.8},{"x":17.32050807568877,"y":210,"ot_rate":0.8333333333333334},{"x":381.051177665153,"y":240,"ot_rate":0},{"x":433.0127018922193,"y":210,"ot_rate":0},{"x":467.6537180435968,"y":210,"ot_rate":0},{"x":103.92304845413263,"y":360,"ot_rate":0.25},{"x":433.0127018922193,"y":390,"ot_rate":1},{"x":294.44863728670913,"y":90,"ot_rate":1},{"x":329.08965343808666,"y":390,"ot_rate":0},{"x":398.3716857408417,"y":270,"ot_rate":0},{"x":398.3716857408417,"y":210,"ot_rate":0.25},{"x":277.12812921102034,"y":60,"ot_rate":0},{"x":415.6921938165305,"y":360,"ot_rate":1},{"x":329.08965343808666,"y":150,"ot_rate":0},{"x":311.76914536239786,"y":240,"ot_rate":0},{"x":311.76914536239786,"y":180,"ot_rate":0},{"x":381.051177665153,"y":60,"ot_rate":0},{"x":762.102355330306,"y":240,"ot_rate":1},{"x":103.92304845413263,"y":60,"ot_rate":0},{"x":415.6921938165305,"y":180,"ot_rate":0},{"x":242.4871130596428,"y":360,"ot_rate":1},{"x":467.6537180435968,"y":330,"ot_rate":0},{"x":259.80762113533154,"y":90,"ot_rate":0},{"x":294.44863728670913,"y":330,"ot_rate":1},{"x":155.88457268119893,"y":90,"ot_rate":0.5},{"x":207.84609690826525,"y":60,"ot_rate":1},{"x":381.051177665153,"y":420,"ot_rate":0},{"x":190.5255888325765,"y":390,"ot_rate":0.5},{"x":433.0127018922193,"y":270,"ot_rate":0},{"x":363.7306695894642,"y":330,"ot_rate":1},{"x":294.44863728670913,"y":390,"ot_rate":0},{"x":398.3716857408417,"y":30,"ot_rate":0},{"x":381.051177665153,"y":360,"ot_rate":0},{"x":363.7306695894642,"y":270,"ot_rate":0},{"x":450.33320996790803,"y":180,"ot_rate":1},{"x":363.7306695894642,"y":210,"ot_rate":0.6666666666666666},{"x":363.7306695894642,"y":390,"ot_rate":1},{"x":173.2050807568877,"y":60,"ot_rate":1},{"x":519.6152422706631,"y":300,"ot_rate":1},{"x":415.6921938165305,"y":300,"ot_rate":0},{"x":311.76914536239786,"y":120,"ot_rate":1},{"x":381.051177665153,"y":120,"ot_rate":0},{"x":363.7306695894642,"y":90,"ot_rate":1},{"x":121.2435565298214,"y":390,"ot_rate":1},{"x":346.4101615137754,"y":300,"ot_rate":1},{"x":346.4101615137754,"y":180,"ot_rate":1},{"x":86.60254037844385,"y":30,"ot_rate":0},{"x":346.4101615137754,"y":60,"ot_rate":0},{"x":398.3716857408417,"y":330,"ot_rate":0},{"x":329.08965343808666,"y":330,"ot_rate":0}]	teamShots(this.params.id).success(function(data) {
		$scope.chartData = data
	})
}])