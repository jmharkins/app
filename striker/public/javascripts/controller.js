stkApp.controller('mainControl', ['$scope', '$routeParams', function ($scope , $routeParams){}])

stkApp.controller('playControl', ['$scope', '$location', '$routeParams', 'playerShots', 'playerList', function ($scope, $location, $routeParams, playerShots, playerList){
	this.params = $routeParams;
	var pID = this.params.id;
	$scope.plist = [];
	console.log("controller load")
	$scope.curPlayer = {};
	playerList().success(function(data){
		$scope.plist = data 
		$scope.curPlayer = $scope.plist.filter(function(d) { return d._id.player_id === pID })[0]
	})
	$scope.$watch("curPlayer", function(newValue, oldValue) {
		console.log(newValue, oldValue)
		if(oldValue._id ) {
		var url = '/player/' + newValue._id.player_id
		$location.path(url)
		}
	})
	$scope.chartData = [];
	$scope.lgavgs = [{"x":225.16660498395402,"y":210,"ot_rate":0.38613861386138615},{"x":69.28203230275508,"y":180,"ot_rate":0.42483660130718953},{"x":103.92304845413263,"y":240,"ot_rate":0.4546952224052718},{"x":259.80762113533154,"y":270,"ot_rate":0.36363636363636365},{"x":121.2435565298214,"y":210,"ot_rate":0.4939271255060729},{"x":121.2435565298214,"y":150,"ot_rate":0.4370860927152318},{"x":190.5255888325765,"y":270,"ot_rate":0.373134328358209},{"x":277.12812921102034,"y":240,"ot_rate":0.2391304347826087},{"x":86.60254037844385,"y":210,"ot_rate":0.43509865005192105},{"x":86.60254037844385,"y":270,"ot_rate":0.4557377049180328},{"x":225.16660498395402,"y":150,"ot_rate":0.35106382978723405},{"x":242.4871130596428,"y":180,"ot_rate":0.32160804020100503},{"x":138.56406460551017,"y":240,"ot_rate":0.4622356495468278},{"x":51.96152422706631,"y":270,"ot_rate":0.4539877300613497},{"x":173.2050807568877,"y":300,"ot_rate":0.40375586854460094},{"x":155.88457268119893,"y":210,"ot_rate":0.4850498338870432},{"x":121.2435565298214,"y":270,"ot_rate":0.5085910652920962},{"x":69.28203230275508,"y":240,"ot_rate":0.4855195911413969},{"x":86.60254037844385,"y":150,"ot_rate":0.5204918032786885},{"x":155.88457268119893,"y":270,"ot_rate":0.3888888888888889},{"x":103.92304845413263,"y":180,"ot_rate":0.5032537960954447},{"x":190.5255888325765,"y":150,"ot_rate":0.3567073170731707},{"x":34.64101615137754,"y":240,"ot_rate":0.6428571428571429},{"x":207.84609690826525,"y":180,"ot_rate":0.41896024464831805},{"x":190.5255888325765,"y":90,"ot_rate":0.5},{"x":173.2050807568877,"y":240,"ot_rate":0.4008810572687225},{"x":51.96152422706631,"y":210,"ot_rate":0.6223776223776224},{"x":225.16660498395402,"y":270,"ot_rate":0.34843205574912894},{"x":259.80762113533154,"y":210,"ot_rate":0.32},{"x":155.88457268119893,"y":150,"ot_rate":0.36645962732919257},{"x":138.56406460551017,"y":180,"ot_rate":0.4908256880733945},{"x":242.4871130596428,"y":240,"ot_rate":0.3535714285714286},{"x":103.92304845413263,"y":120,"ot_rate":0.43333333333333335},{"x":17.32050807568877,"y":210,"ot_rate":0.8620689655172413},{"x":207.84609690826525,"y":240,"ot_rate":0.39705882352941174},{"x":34.64101615137754,"y":180,"ot_rate":0.44339622641509435},{"x":69.28203230275508,"y":120,"ot_rate":0.4583333333333333},{"x":242.4871130596428,"y":300,"ot_rate":0.30120481927710846},{"x":225.16660498395402,"y":330,"ot_rate":0.3783783783783784},{"x":294.44863728670913,"y":150,"ot_rate":0.16666666666666666},{"x":277.12812921102034,"y":300,"ot_rate":0.21052631578947367},{"x":138.56406460551017,"y":120,"ot_rate":0.4095238095238095},{"x":207.84609690826525,"y":300,"ot_rate":0.3879310344827586},{"x":103.92304845413263,"y":300,"ot_rate":0.48863636363636365},{"x":51.96152422706631,"y":150,"ot_rate":0.5757575757575758},{"x":69.28203230275508,"y":300,"ot_rate":0.5432098765432098},{"x":138.56406460551017,"y":300,"ot_rate":0.4270833333333333},{"x":190.5255888325765,"y":210,"ot_rate":0.45689655172413796},{"x":242.4871130596428,"y":120,"ot_rate":0.29577464788732394},{"x":34.64101615137754,"y":300,"ot_rate":0.3333333333333333},{"x":173.2050807568877,"y":180,"ot_rate":0.4268292682926829},{"x":207.84609690826525,"y":120,"ot_rate":0.38125},{"x":138.56406460551017,"y":360,"ot_rate":0.5454545454545454},{"x":190.5255888325765,"y":330,"ot_rate":0.3157894736842105},{"x":173.2050807568877,"y":120,"ot_rate":0.3805309734513274},{"x":86.60254037844385,"y":330,"ot_rate":0.4375},{"x":207.84609690826525,"y":360,"ot_rate":0.14285714285714285},{"x":86.60254037844385,"y":90,"ot_rate":0.4},{"x":294.44863728670913,"y":210,"ot_rate":0.25},{"x":121.2435565298214,"y":90,"ot_rate":0.46153846153846156},{"x":277.12812921102034,"y":180,"ot_rate":0.29545454545454547},{"x":259.80762113533154,"y":150,"ot_rate":0.2413793103448276},{"x":225.16660498395402,"y":90,"ot_rate":0.4375},{"x":121.2435565298214,"y":330,"ot_rate":0.5},{"x":190.5255888325765,"y":30,"ot_rate":0.5},{"x":51.96152422706631,"y":330,"ot_rate":0.5},{"x":155.88457268119893,"y":330,"ot_rate":0.4583333333333333},{"x":346.4101615137754,"y":360,"ot_rate":0},{"x":259.80762113533154,"y":330,"ot_rate":0.2857142857142857},{"x":173.2050807568877,"y":60,"ot_rate":0.3333333333333333},{"x":242.4871130596428,"y":360,"ot_rate":0.5},{"x":381.051177665153,"y":120,"ot_rate":0},{"x":103.92304845413263,"y":360,"ot_rate":0.3333333333333333},{"x":311.76914536239786,"y":240,"ot_rate":0},{"x":294.44863728670913,"y":270,"ot_rate":0.45454545454545453},{"x":155.88457268119893,"y":90,"ot_rate":0.125},{"x":51.96152422706631,"y":90,"ot_rate":0},{"x":658.1793068761733,"y":120,"ot_rate":0},{"x":277.12812921102034,"y":120,"ot_rate":0.25},{"x":190.5255888325765,"y":390,"ot_rate":0.5},{"x":155.88457268119893,"y":390,"ot_rate":0.3333333333333333},{"x":311.76914536239786,"y":180,"ot_rate":0},{"x":17.32050807568877,"y":150,"ot_rate":0.75},{"x":34.64101615137754,"y":360,"ot_rate":1},{"x":207.84609690826525,"y":420,"ot_rate":0},{"x":363.7306695894642,"y":210,"ot_rate":0},{"x":17.32050807568877,"y":270,"ot_rate":0.4},{"x":433.0127018922193,"y":210,"ot_rate":0},{"x":484.9742261192856,"y":240,"ot_rate":0},{"x":433.0127018922193,"y":30,"ot_rate":1},{"x":294.44863728670913,"y":330,"ot_rate":0},{"x":277.12812921102034,"y":360,"ot_rate":1},{"x":311.76914536239786,"y":60,"ot_rate":0},{"x":398.3716857408417,"y":150,"ot_rate":0},{"x":398.3716857408417,"y":210,"ot_rate":0},{"x":259.80762113533154,"y":390,"ot_rate":0},{"x":398.3716857408417,"y":90,"ot_rate":0.5},{"x":346.4101615137754,"y":300,"ot_rate":0},{"x":329.08965343808666,"y":210,"ot_rate":0},{"x":398.3716857408417,"y":390,"ot_rate":0},{"x":744.7818472546171,"y":210,"ot_rate":1},{"x":86.60254037844385,"y":390,"ot_rate":0},{"x":398.3716857408417,"y":270,"ot_rate":0},{"x":259.80762113533154,"y":90,"ot_rate":0},{"x":467.6537180435968,"y":90,"ot_rate":0},{"x":450.33320996790803,"y":240,"ot_rate":0.5},{"x":311.76914536239786,"y":300,"ot_rate":1},{"x":381.051177665153,"y":240,"ot_rate":0.5},{"x":363.7306695894642,"y":30,"ot_rate":0},{"x":450.33320996790803,"y":180,"ot_rate":0},{"x":346.4101615137754,"y":120,"ot_rate":1},{"x":277.12812921102034,"y":60,"ot_rate":0},{"x":381.051177665153,"y":420,"ot_rate":0},{"x":173.2050807568877,"y":360,"ot_rate":1},{"x":363.7306695894642,"y":90,"ot_rate":0},{"x":363.7306695894642,"y":150,"ot_rate":0.6666666666666666},{"x":34.64101615137754,"y":120,"ot_rate":0.5},{"x":346.4101615137754,"y":60,"ot_rate":1},{"x":502.29473419497435,"y":150,"ot_rate":1},{"x":415.6921938165305,"y":240,"ot_rate":0},{"x":433.0127018922193,"y":150,"ot_rate":0},{"x":363.7306695894642,"y":330,"ot_rate":0.5},{"x":138.56406460551017,"y":60,"ot_rate":1},{"x":329.08965343808666,"y":270,"ot_rate":1},{"x":329.08965343808666,"y":330,"ot_rate":0},{"x":363.7306695894642,"y":390,"ot_rate":0},{"x":207.84609690826525,"y":60,"ot_rate":1},{"x":346.4101615137754,"y":240,"ot_rate":1},{"x":311.76914536239786,"y":120,"ot_rate":0}]
	playerShots(this.params.id).success(function(data) {
		$scope.chartData = data
	})
}])

stkApp.controller('teamControl', ['$scope', '$location', '$routeParams', 'teamShots', 'teamList', function ($scope , $location, $routeParams, teamShots, teamList){
	this.params = $routeParams;
	var tID = this.params.id;
	$scope.tlist = [];
	console.log("controller load")
	$scope.curTeam = {};
	teamList().success(function(data){
		$scope.tlist = data 
		$scope.curTeam = $scope.tlist.filter(function(d) { return d.id == tID })[0]
	})
	$scope.$watch("curTeam", function(newValue, oldValue) {
		console.log(newValue, oldValue)
		if(oldValue.id) {
		var url = '/team/' + newValue.id
		$location.path(url)
		}
	})
	$scope.chartData = [];
	$scope.lgavgs = [{"x":225.16660498395402,"y":210,"ot_rate":0.38613861386138615},{"x":69.28203230275508,"y":180,"ot_rate":0.42483660130718953},{"x":103.92304845413263,"y":240,"ot_rate":0.4546952224052718},{"x":259.80762113533154,"y":270,"ot_rate":0.36363636363636365},{"x":121.2435565298214,"y":210,"ot_rate":0.4939271255060729},{"x":121.2435565298214,"y":150,"ot_rate":0.4370860927152318},{"x":190.5255888325765,"y":270,"ot_rate":0.373134328358209},{"x":277.12812921102034,"y":240,"ot_rate":0.2391304347826087},{"x":86.60254037844385,"y":210,"ot_rate":0.43509865005192105},{"x":86.60254037844385,"y":270,"ot_rate":0.4557377049180328},{"x":225.16660498395402,"y":150,"ot_rate":0.35106382978723405},{"x":242.4871130596428,"y":180,"ot_rate":0.32160804020100503},{"x":138.56406460551017,"y":240,"ot_rate":0.4622356495468278},{"x":51.96152422706631,"y":270,"ot_rate":0.4539877300613497},{"x":173.2050807568877,"y":300,"ot_rate":0.40375586854460094},{"x":155.88457268119893,"y":210,"ot_rate":0.4850498338870432},{"x":121.2435565298214,"y":270,"ot_rate":0.5085910652920962},{"x":69.28203230275508,"y":240,"ot_rate":0.4855195911413969},{"x":86.60254037844385,"y":150,"ot_rate":0.5204918032786885},{"x":155.88457268119893,"y":270,"ot_rate":0.3888888888888889},{"x":103.92304845413263,"y":180,"ot_rate":0.5032537960954447},{"x":190.5255888325765,"y":150,"ot_rate":0.3567073170731707},{"x":34.64101615137754,"y":240,"ot_rate":0.6428571428571429},{"x":207.84609690826525,"y":180,"ot_rate":0.41896024464831805},{"x":190.5255888325765,"y":90,"ot_rate":0.5},{"x":173.2050807568877,"y":240,"ot_rate":0.4008810572687225},{"x":51.96152422706631,"y":210,"ot_rate":0.6223776223776224},{"x":225.16660498395402,"y":270,"ot_rate":0.34843205574912894},{"x":259.80762113533154,"y":210,"ot_rate":0.32},{"x":155.88457268119893,"y":150,"ot_rate":0.36645962732919257},{"x":138.56406460551017,"y":180,"ot_rate":0.4908256880733945},{"x":242.4871130596428,"y":240,"ot_rate":0.3535714285714286},{"x":103.92304845413263,"y":120,"ot_rate":0.43333333333333335},{"x":17.32050807568877,"y":210,"ot_rate":0.8620689655172413},{"x":207.84609690826525,"y":240,"ot_rate":0.39705882352941174},{"x":34.64101615137754,"y":180,"ot_rate":0.44339622641509435},{"x":69.28203230275508,"y":120,"ot_rate":0.4583333333333333},{"x":242.4871130596428,"y":300,"ot_rate":0.30120481927710846},{"x":225.16660498395402,"y":330,"ot_rate":0.3783783783783784},{"x":294.44863728670913,"y":150,"ot_rate":0.16666666666666666},{"x":277.12812921102034,"y":300,"ot_rate":0.21052631578947367},{"x":138.56406460551017,"y":120,"ot_rate":0.4095238095238095},{"x":207.84609690826525,"y":300,"ot_rate":0.3879310344827586},{"x":103.92304845413263,"y":300,"ot_rate":0.48863636363636365},{"x":51.96152422706631,"y":150,"ot_rate":0.5757575757575758},{"x":69.28203230275508,"y":300,"ot_rate":0.5432098765432098},{"x":138.56406460551017,"y":300,"ot_rate":0.4270833333333333},{"x":190.5255888325765,"y":210,"ot_rate":0.45689655172413796},{"x":242.4871130596428,"y":120,"ot_rate":0.29577464788732394},{"x":34.64101615137754,"y":300,"ot_rate":0.3333333333333333},{"x":173.2050807568877,"y":180,"ot_rate":0.4268292682926829},{"x":207.84609690826525,"y":120,"ot_rate":0.38125},{"x":138.56406460551017,"y":360,"ot_rate":0.5454545454545454},{"x":190.5255888325765,"y":330,"ot_rate":0.3157894736842105},{"x":173.2050807568877,"y":120,"ot_rate":0.3805309734513274},{"x":86.60254037844385,"y":330,"ot_rate":0.4375},{"x":207.84609690826525,"y":360,"ot_rate":0.14285714285714285},{"x":86.60254037844385,"y":90,"ot_rate":0.4},{"x":294.44863728670913,"y":210,"ot_rate":0.25},{"x":121.2435565298214,"y":90,"ot_rate":0.46153846153846156},{"x":277.12812921102034,"y":180,"ot_rate":0.29545454545454547},{"x":259.80762113533154,"y":150,"ot_rate":0.2413793103448276},{"x":225.16660498395402,"y":90,"ot_rate":0.4375},{"x":121.2435565298214,"y":330,"ot_rate":0.5},{"x":190.5255888325765,"y":30,"ot_rate":0.5},{"x":51.96152422706631,"y":330,"ot_rate":0.5},{"x":155.88457268119893,"y":330,"ot_rate":0.4583333333333333},{"x":346.4101615137754,"y":360,"ot_rate":0},{"x":259.80762113533154,"y":330,"ot_rate":0.2857142857142857},{"x":173.2050807568877,"y":60,"ot_rate":0.3333333333333333},{"x":242.4871130596428,"y":360,"ot_rate":0.5},{"x":381.051177665153,"y":120,"ot_rate":0},{"x":103.92304845413263,"y":360,"ot_rate":0.3333333333333333},{"x":311.76914536239786,"y":240,"ot_rate":0},{"x":294.44863728670913,"y":270,"ot_rate":0.45454545454545453},{"x":155.88457268119893,"y":90,"ot_rate":0.125},{"x":51.96152422706631,"y":90,"ot_rate":0},{"x":658.1793068761733,"y":120,"ot_rate":0},{"x":277.12812921102034,"y":120,"ot_rate":0.25},{"x":190.5255888325765,"y":390,"ot_rate":0.5},{"x":155.88457268119893,"y":390,"ot_rate":0.3333333333333333},{"x":311.76914536239786,"y":180,"ot_rate":0},{"x":17.32050807568877,"y":150,"ot_rate":0.75},{"x":34.64101615137754,"y":360,"ot_rate":1},{"x":207.84609690826525,"y":420,"ot_rate":0},{"x":363.7306695894642,"y":210,"ot_rate":0},{"x":17.32050807568877,"y":270,"ot_rate":0.4},{"x":433.0127018922193,"y":210,"ot_rate":0},{"x":484.9742261192856,"y":240,"ot_rate":0},{"x":433.0127018922193,"y":30,"ot_rate":1},{"x":294.44863728670913,"y":330,"ot_rate":0},{"x":277.12812921102034,"y":360,"ot_rate":1},{"x":311.76914536239786,"y":60,"ot_rate":0},{"x":398.3716857408417,"y":150,"ot_rate":0},{"x":398.3716857408417,"y":210,"ot_rate":0},{"x":259.80762113533154,"y":390,"ot_rate":0},{"x":398.3716857408417,"y":90,"ot_rate":0.5},{"x":346.4101615137754,"y":300,"ot_rate":0},{"x":329.08965343808666,"y":210,"ot_rate":0},{"x":398.3716857408417,"y":390,"ot_rate":0},{"x":744.7818472546171,"y":210,"ot_rate":1},{"x":86.60254037844385,"y":390,"ot_rate":0},{"x":398.3716857408417,"y":270,"ot_rate":0},{"x":259.80762113533154,"y":90,"ot_rate":0},{"x":467.6537180435968,"y":90,"ot_rate":0},{"x":450.33320996790803,"y":240,"ot_rate":0.5},{"x":311.76914536239786,"y":300,"ot_rate":1},{"x":381.051177665153,"y":240,"ot_rate":0.5},{"x":363.7306695894642,"y":30,"ot_rate":0},{"x":450.33320996790803,"y":180,"ot_rate":0},{"x":346.4101615137754,"y":120,"ot_rate":1},{"x":277.12812921102034,"y":60,"ot_rate":0},{"x":381.051177665153,"y":420,"ot_rate":0},{"x":173.2050807568877,"y":360,"ot_rate":1},{"x":363.7306695894642,"y":90,"ot_rate":0},{"x":363.7306695894642,"y":150,"ot_rate":0.6666666666666666},{"x":34.64101615137754,"y":120,"ot_rate":0.5},{"x":346.4101615137754,"y":60,"ot_rate":1},{"x":502.29473419497435,"y":150,"ot_rate":1},{"x":415.6921938165305,"y":240,"ot_rate":0},{"x":433.0127018922193,"y":150,"ot_rate":0},{"x":363.7306695894642,"y":330,"ot_rate":0.5},{"x":138.56406460551017,"y":60,"ot_rate":1},{"x":329.08965343808666,"y":270,"ot_rate":1},{"x":329.08965343808666,"y":330,"ot_rate":0},{"x":363.7306695894642,"y":390,"ot_rate":0},{"x":207.84609690826525,"y":60,"ot_rate":1},{"x":346.4101615137754,"y":240,"ot_rate":1},{"x":311.76914536239786,"y":120,"ot_rate":0}]
	teamShots(this.params.id).success(function(data) {
		$scope.chartData = data
	})
}])